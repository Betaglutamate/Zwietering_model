sucrose_m63GluCAA_37C_growthrates_GFP <-
sucrose_m63GluCAA_37C_growthrates[1:(nrow(sucrose_m63GluCAA_37C_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63GluCAA_37C_Sucrose", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = sucrose_m63GluCAA_37C_growthrates$max_growth[((nrow(sucrose_m63GluCAA_37C_growthrates)/2)+1):nrow(sucrose_m63GluCAA_37C_growthrates)])
osmolarities_m63GluCAA <- c(350, 489, 663, 888, 1139, 1413)
sucrose_m63GluCAA_37C_growthrates_GFP <-
set_osmolarity(sucrose_m63GluCAA_37C_growthrates_GFP, osmolarities_m63GluCAA)
# m63GluCaa30C
sucrose_m63GluCAA_30C_growthrates_GFP <-
sucrose_m63GluCAA_30C_growthrates[1:(nrow(sucrose_m63GluCAA_30C_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63GluCAA_30C_Sucrose", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = sucrose_m63GluCAA_30C_growthrates$max_growth[((nrow(sucrose_m63GluCAA_30C_growthrates)/2)+1):nrow(sucrose_m63GluCAA_30C_growthrates)])
osmolarities_m63GluCAA_30c <- c(348, 471, 626, 797, 950, 1181)
sucrose_m63GluCAA_30C_growthrates_GFP <-
set_osmolarity(sucrose_m63GluCAA_30C_growthrates_GFP, osmolarities_m63GluCAA_30c)
# m63gly_37C
sucrose_m63Gly_37c_growthrates_GFP <-
sucrose_m63Gly_37c_growthrates[1:(nrow(sucrose_m63Gly_37c_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63Gly_37C_Sucrose", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = sucrose_m63Gly_37c_growthrates$max_growth[((nrow(sucrose_m63Gly_37c_growthrates)/2)+1):nrow(sucrose_m63Gly_37c_growthrates)])
osmolarities_m63Gly_37c <- c(250, 380, 543, 730, 949, 1201)
sucrose_m63Gly_37c_growthrates_GFP <-
set_osmolarity(sucrose_m63Gly_37c_growthrates_GFP, osmolarities_m63Gly_37c)
#m63gly_betaine
sucrose_m63GlyBetaine_37c_growthrates_GFP <-
sucrose_m63GlyBetaine_37c_growthrates[1:(nrow(sucrose_m63GlyBetaine_37c_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63Glybetaine_37C_Sucrose", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = sucrose_m63GlyBetaine_37c_growthrates$max_growth[((nrow(sucrose_m63GlyBetaine_37c_growthrates)/2)+1):nrow(sucrose_m63GlyBetaine_37c_growthrates)])
osmolarities_m63GlyBetaine_37c <- c(250, 380, 543, 730, 949, 1201)
sucrose_m63GlyBetaine_37c_growthrates_GFP <-
set_osmolarity(sucrose_m63GlyBetaine_37c_growthrates_GFP, osmolarities_m63GlyBetaine_37c)
# m63GluCaa Betaine
sucrose_m63GluCAABetaine_37C_growthrates_GFP <-
sucrose_m63GluCAABetaine_37c_growthrates[1:(nrow(sucrose_m63GluCAABetaine_37c_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63GluCAABetaine_37C_Sucrose", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = sucrose_m63GluCAABetaine_37c_growthrates$max_growth[((nrow(sucrose_m63GluCAABetaine_37c_growthrates)/2)+1):nrow(sucrose_m63GluCAABetaine_37c_growthrates)])
osmolarities_m63GluCAABetaine_37C <- c(348, 471, 626, 797, 950, 1181)
sucrose_m63GluCAABetaine_37C_growthrates_GFP <-
set_osmolarity(sucrose_m63GluCAABetaine_37C_growthrates_GFP, osmolarities_m63GluCAABetaine_37C)
# m63GluCAA NaCl
NaCl_m63GluCAA_37C_growthrates_GFP <-
NaCl_m63GluCAA_37c_growthrates[1:(nrow(NaCl_m63GluCAA_37c_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63GluCAA_37C_NaCl", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = NaCl_m63GluCAA_37c_growthrates$max_growth[((nrow(NaCl_m63GluCAA_37c_growthrates)/2)+1):nrow(NaCl_m63GluCAA_37c_growthrates)])
osmolarities_NaCl_m63GluCAA_37C <- c(276, 539, 801, 1045, 1666, 2065)
NaCl_m63GluCAA_37C_growthrates_GFP <-
set_osmolarity(NaCl_m63GluCAA_37C_growthrates_GFP, osmolarities_NaCl_m63GluCAA_37C)
# NaCl_m63GluCAABetaine_37C
NaCl_m63GluCAABetaine_37C_growthrates_GFP <-
NaCl_m63GluCAABetaine_37c_growthrates[1:(nrow(NaCl_m63GluCAABetaine_37c_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63GluCAA_37C_NaCl", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = NaCl_m63GluCAABetaine_37c_growthrates$max_growth[((nrow(NaCl_m63GluCAABetaine_37c_growthrates)/2)+1):nrow(NaCl_m63GluCAABetaine_37c_growthrates)])
osmolarities_NaCl_m63GluCAABetaine_37C <-  c(276, 539, 801, 1045, 1666, 2065)
NaCl_m63GluCAABetaine_37C_growthrates_GFP <-
set_osmolarity(NaCl_m63GluCAABetaine_37C_growthrates_GFP, osmolarities_NaCl_m63GluCAABetaine_37C)
# Sucrose_m63Glu_37c_growthrates_GFP
Sucrose_m63Glu_37c_growthrates_GFP <-
Sucrose_m63Glu_37c_growthrates[1:(nrow(Sucrose_m63Glu_37c_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63Glu_37C_Sucrose", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = Sucrose_m63Glu_37c_growthrates$max_growth[((nrow(Sucrose_m63Glu_37c_growthrates)/2)+1):nrow(Sucrose_m63Glu_37c_growthrates)])
osmolarities_Sucrose_m63Glu_37c <-  c(260, 372, 533, 858, 1178, 1561)
Sucrose_m63Glu_37c_growthrates_GFP <-
set_osmolarity(Sucrose_m63Glu_37c_growthrates_GFP, osmolarities_Sucrose_m63Glu_37c)
# Sucrose_m63Glu_42c_growthrates_GFP
Sucrose_m63Glu_42c_growthrates_GFP <-
Sucrose_m63Glu_42c_growthrates[1:(nrow(Sucrose_m63Glu_42c_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63Glu_42C_Sucrose", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = Sucrose_m63Glu_42c_growthrates$max_growth[((nrow(Sucrose_m63Glu_42c_growthrates)/2)+1):nrow(Sucrose_m63Glu_42c_growthrates)])
osmolarities_Sucrose_m63Glu_42c <-  c(260, 372, 533, 858, 1178, 1561)
Sucrose_m63Glu_42c_growthrates_GFP <-
set_osmolarity(Sucrose_m63Glu_42c_growthrates_GFP, osmolarities_Sucrose_m63Glu_42c)
# Sucrose_m63Man_37c_growthrates_GFP
Sucrose_m63Man_37c_growthrates_GFP <-
Sucrose_m63Man_37c_growthrates[1:(nrow(Sucrose_m63Man_37c_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63Man_37C_Sucrose", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = Sucrose_m63Man_37c_growthrates$max_growth[((nrow(Sucrose_m63Man_37c_growthrates)/2)+1):nrow(Sucrose_m63Man_37c_growthrates)])
osmolarities_Sucrose_m63Man_37c <-  c(261, 418, 596, 909, 1202, 1612)
Sucrose_m63Man_37c_growthrates_GFP <-
set_osmolarity(Sucrose_m63Man_37c_growthrates_GFP, osmolarities_Sucrose_m63Man_37c)
# Sucrose_RDM_37c_growthrates_GFP
Sucrose_RDM_37c_growthrates_GFP <-
Sucrose_RDM_37c_growthrates[1:(nrow(Sucrose_RDM_37c_growthrates)/2),] %>%
mutate(group = substr(sample,1,7), Type = "M63Man_37C_Sucrose", osmolarity=as.numeric(substr(group,4,7))) %>%
mutate(max_growth_wt = Sucrose_RDM_37c_growthrates$max_growth[((nrow(Sucrose_RDM_37c_growthrates)/2)+1):nrow(Sucrose_RDM_37c_growthrates)])
osmolarities_Sucrose_RDM_37c <-  c(200, 361, 550, 863, 1165, 1579)
Sucrose_RDM_37c_growthrates_GFP <-
set_osmolarity(Sucrose_RDM_37c_growthrates_GFP, osmolarities_Sucrose_RDM_37c)
##calculate max_yield
# find_max_yield <- function(df) {
#   max_yield <- df %>%
#     filter(Time>start_stationary[1]) %>%
#     select(OD)
#     max_yield <- as.double(max_yield[1,1])
#     df$max_yield <- max_yield
#     return(df)
# }
# ##calculate max_yield
#
find_max_yield <- function(df) {
max_yield <- df[length(df$Time),] %>%
select(OD)
max_yield <- as.double(max_yield[1,1])
df$max_yield <- max_yield
return(df)
}
find_max_yield_WT <- function(df) {
max_yield <- df[length(df$Time),] %>%
select(ODWT)
max_yield <- as.double(max_yield[1,1])
df$max_yield_WT <- max_yield
return(df)
}
##calculate area under curve
library("DescTools")
find_aoc <- function(df) {
temp <-df %>%
filter(Time < start_stationary[1])
auc <- AUC(temp$Time, temp$GFPdivOD, from = min(x, na.rm = TRUE), to = max(x, na.rm = TRUE),
method = c("trapezoid", "step", "spline", "linear"),
absolutearea = TRUE, subdivisions = 10, na.rm = FALSE)
df$auc <-auc
return(df)
}
## Calculate average yield at OD = stationary phase start
sucrose_m63GluCAA_37C_GFP_max_yield <-
sucrose_m63GluCAA_37C_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
sucrose_m63GluCAA_30C_GFP_max_yield <-
sucrose_m63GluCAA_30C_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
sucrose_m63Gly_GFP_max_yield <-
sucrose_m63Gly_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
sucrose_m63GlyBetaine_37c_GFP_max_yield <-
sucrose_m63GlyBetaine_37c_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
sucrose_m63GluCAABetaine_37c_GFP_max_yield <-
sucrose_m63GluCAABetaine_37c_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
NaCl_m63GluCAA_37c_GFP_max_yield <-
NaCl_m63GluCAA_37c_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
NaCl_m63GluCAABetaine_37c_GFP_max_yield <-
NaCl_m63GluCAABetaine_37c_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
Sucrose_m63Glu_37c_GFP_max_yield <-
Sucrose_m63Glu_37c_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
Sucrose_m63Glu_42c_GFP_max_yield <-
Sucrose_m63Glu_42c_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
Sucrose_m63Man_37c_GFP_max_yield <-
Sucrose_m63Man_37c_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
Sucrose_RDM_37c_GFP_max_yield <-
Sucrose_RDM_37c_GFP %>%
group_by(sample) %>%
group_split() %>%
map(find_max_yield) %>%
map(find_aoc) %>%
map(find_max_yield_WT) %>%
bind_rows()
## summarize values over condition and stage
# M63GluCAA at 30C with sucrose
sucrose_m63GluCAA_30C_GFP_mid <- sucrose_m63GluCAA_30C_GFP_max_yield[,2:ncol(sucrose_m63GluCAA_30C_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc))
sucrose_30C_ready <-
bind_cols(sucrose_m63GluCAA_30C_GFP_mid,
growth_rate = sucrose_m63GluCAA_30C_growthrates_GFP$max_growth,
growth_rate_wt = sucrose_m63GluCAA_30C_growthrates_GFP$max_growth_wt,
osmolarity = sucrose_m63GluCAA_30C_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7)) %>%
mutate(Experiment = "Sucrose_M63GluCAA_30C") %>%
mutate(Osmotic_shock = "Sucrose") %>%
mutate(Carbon_source = "Glucose")
# M63GluCAA at 37C with sucrose
sucrose_m63GluCAA_37C_GFP_mid <- sucrose_m63GluCAA_37C_GFP_max_yield[,2:ncol(sucrose_m63GluCAA_37C_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "Sucrose_M63GluCAA_37C") %>%
mutate(Osmotic_shock = "Sucrose") %>%
mutate(Carbon_source = "Glucose")
sucrose_ready <-
bind_cols(sucrose_m63GluCAA_37C_GFP_mid,
growth_rate = sucrose_m63GluCAA_37C_growthrates_GFP$max_growth[rep(c(FALSE, TRUE), c(1, 3))], #remember you removed run 1 because data was anomalous
growth_rate_wt = sucrose_m63GluCAA_37C_growthrates_GFP$max_growth_wt[rep(c(FALSE, TRUE), c(1, 3))],
osmolarity = sucrose_m63GluCAA_37C_growthrates_GFP$osmolarity[rep(c(FALSE, TRUE), c(1, 3))]) %>%
mutate(group = substr(sample,1,7))
# M63Gly at 37C with sucrose
M63Gly_37C_mid <- sucrose_m63Gly_GFP_max_yield[,2:ncol(sucrose_m63Gly_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "Sucrose_M63Gly_37C") %>%
mutate(Osmotic_shock = "Sucrose") %>%
mutate(Carbon_source = "Glycine")
M63Gly_37C_ready <-
bind_cols(M63Gly_37C_mid,
growth_rate = sucrose_m63Gly_37c_growthrates_GFP$max_growth,
growth_rate_wt = sucrose_m63Gly_37c_growthrates_GFP$max_growth_wt,
osmolarity = sucrose_m63Gly_37c_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7))
# M63Glybetaine at 37C with sucrose
M63Glybetaine_37C_mid <- sucrose_m63GlyBetaine_37c_GFP_max_yield[,2:ncol(sucrose_m63GlyBetaine_37c_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "Sucrose_M63GlyBetaine_37C") %>%
mutate(Osmotic_shock = "Sucrose") %>%
mutate(Carbon_source = "Glycine")
M63Glybetaine_37C_ready <-
bind_cols(M63Glybetaine_37C_mid,
growth_rate = sucrose_m63GlyBetaine_37c_growthrates_GFP$max_growth,
growth_rate_wt = sucrose_m63GlyBetaine_37c_growthrates_GFP$max_growth_wt,
osmolarity = sucrose_m63GlyBetaine_37c_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7))
# M63GluCAABetaine at 37C with sucrose
sucrose_m63GluCAABetaine_37C_GFP_mid <- sucrose_m63GluCAABetaine_37c_GFP_max_yield[,2:ncol(sucrose_m63GluCAABetaine_37c_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "Sucrose_M63GluCAABetaine_37C") %>%
mutate(Osmotic_shock = "Sucrose") %>%
mutate(Carbon_source = "Glucose")
M63GluCAAbetaine_37C_ready <-
bind_cols(sucrose_m63GluCAABetaine_37C_GFP_mid,
growth_rate = sucrose_m63GluCAABetaine_37C_growthrates_GFP$max_growth,
growth_rate_wt = sucrose_m63GluCAABetaine_37C_growthrates_GFP$max_growth_wt,
osmolarity = sucrose_m63GluCAABetaine_37C_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7))
# M63GluCAA_NaCl at 37C with NaCl
NaCl_m63GluCAA_37C_GFP_mid <- NaCl_m63GluCAA_37c_GFP_max_yield[,2:ncol(NaCl_m63GluCAA_37c_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "NaCl_M63GluCAA_37C") %>%
mutate(Osmotic_shock = "NaCl") %>%
mutate(Carbon_source = "Glucose")
NaCl_M63GluCAA_37C_ready <-
bind_cols(NaCl_m63GluCAA_37C_GFP_mid,
growth_rate = NaCl_m63GluCAA_37C_growthrates_GFP$max_growth,
growth_rate_wt = NaCl_m63GluCAA_37C_growthrates_GFP$max_growth_wt,
osmolarity = NaCl_m63GluCAA_37C_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7))
# M63GluCAABetaine_NaCl at 37C with NaCl
NaCl_m63GluCAABetaine_37C_GFP_mid <- NaCl_m63GluCAABetaine_37c_GFP_max_yield[,2:ncol(NaCl_m63GluCAABetaine_37c_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "NaCl_M63GluCAABetaine_37C") %>%
mutate(Osmotic_shock = "NaCl") %>%
mutate(Carbon_source = "Glucose")
NaCl_M63GluCAABetaine_37C_ready <-
bind_cols(NaCl_m63GluCAABetaine_37C_GFP_mid,
growth_rate = NaCl_m63GluCAABetaine_37C_growthrates_GFP$max_growth,
growth_rate_wt = NaCl_m63GluCAABetaine_37C_growthrates_GFP$max_growth_wt,
osmolarity = NaCl_m63GluCAABetaine_37C_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7))
# Sucrose_m63Glu_37c_growthrates
Sucrose_m63Glu_37C_GFP_mid <- Sucrose_m63Glu_37c_GFP_max_yield[,2:ncol(Sucrose_m63Glu_37c_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "Sucrose_M63Glu_37C") %>%
mutate(Osmotic_shock = "Sucrose") %>%
mutate(Carbon_source = "Glucose")
Sucrose_M63Glu_37C_ready <-
bind_cols(Sucrose_m63Glu_37C_GFP_mid,
growth_rate = Sucrose_m63Glu_37c_growthrates_GFP$max_growth,
growth_rate_wt = Sucrose_m63Glu_37c_growthrates_GFP$max_growth_wt,
osmolarity = Sucrose_m63Glu_37c_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7))
# Sucrose_m63Glu_37c_growthrates
Sucrose_m63Glu_42C_GFP_mid <- Sucrose_m63Glu_42c_GFP_max_yield[,2:ncol(Sucrose_m63Glu_42c_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "Sucrose_M63Glu_42C") %>%
mutate(Osmotic_shock = "Sucrose") %>%
mutate(Carbon_source = "Glucose")
Sucrose_M63Glu_42C_ready <-
bind_cols(Sucrose_m63Glu_42C_GFP_mid,
growth_rate = Sucrose_m63Glu_42c_growthrates_GFP$max_growth,
growth_rate_wt = Sucrose_m63Glu_42c_growthrates_GFP$max_growth_wt,
osmolarity = Sucrose_m63Glu_42c_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7))
# Sucrose_m63Man_37c_growthrates
Sucrose_m63Man_37C_GFP_mid <- Sucrose_m63Man_37c_GFP_max_yield[,2:ncol(Sucrose_m63Man_37c_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "Sucrose_M63Man_37C") %>%
mutate(Osmotic_shock = "Sucrose") %>%
mutate(Carbon_source = "Mannose")
Sucrose_M63Man_37C_ready <-
bind_cols(Sucrose_m63Man_37C_GFP_mid,
growth_rate = Sucrose_m63Man_37c_growthrates_GFP$max_growth,
growth_rate_wt = Sucrose_m63Man_37c_growthrates_GFP$max_growth_wt,
osmolarity = Sucrose_m63Man_37c_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7))
# Sucrose_RDM_37c_growthrates
Sucrose_RDM_37C_GFP_mid <- Sucrose_RDM_37c_GFP_max_yield[,2:ncol(Sucrose_RDM_37c_GFP_max_yield)] %>%
group_by(sample, stage, run) %>%
filter(stage == "exponential") %>%
summarize(meanGFP =mean(GFPdivOD), maxYield = mean(max_yield), maxYieldWT = mean(max_yield_WT), meanAUC =mean(auc)) %>%
mutate(Experiment = "Sucrose_RDM_37C") %>%
mutate(Osmotic_shock = "Sucrose") %>%
mutate(Carbon_source = "Mannose")
Sucrose_RDM_37C_ready <-
bind_cols(Sucrose_RDM_37C_GFP_mid,
growth_rate = Sucrose_RDM_37c_growthrates_GFP$max_growth,
growth_rate_wt = Sucrose_RDM_37c_growthrates_GFP$max_growth_wt,
osmolarity = Sucrose_RDM_37c_growthrates_GFP$osmolarity) %>%
mutate(group = substr(sample,1,7))
#----------------------end of cleaning data sets----------------#
# Bind all the different conditons
all_conditions_df <- bind_rows(sucrose_30C_ready,
sucrose_ready,
M63Gly_37C_ready,
M63Glybetaine_37C_ready,
M63GluCAAbetaine_37C_ready,
NaCl_M63GluCAA_37C_ready,
NaCl_M63GluCAABetaine_37C_ready,
Sucrose_M63Glu_37C_ready,
Sucrose_M63Glu_42C_ready,
Sucrose_M63Man_37C_ready,
Sucrose_RDM_37C_ready) %>%
mutate(doubling_time = (log(2)/growth_rate)) %>%
mutate(growth_rateH = growth_rate*60) %>%
mutate(doubling_timeH = log(2)/growth_rateH)
## filter for all the m63gluCaa conditions
m63glu_string <- c("Sucrose_M63GluCAA_37C",
"Sucrose_M63GluCAABetaine_37C",
"NaCl_M63GluCAA_37C",
"NaCl_M63GluCAABetaine_37C")
### geom point plots
all_conditions_df %>%
ggplot(aes(x=growth_rateH, y=meanGFP, color=group)) +
geom_point()+
ggtitle("Growth rate vs meanGFP grouped by group")+
graph_theme
all_conditions_df %>%
ggplot(aes(x=growth_rateH, y=meanGFP, color=Experiment)) +
geom_point()+
ylab("GFP (A.U.)")+
xlab("Growth rate (1/h)")+
graph_theme
#ggsave(filename = "Growthrate vs GFP all.png", height = 7, width = 14)
all_conditions_df %>%
filter(str_detect(Experiment, "Glu")) %>%
ggplot(aes(x=(doubling_timeH), y=meanGFP, color=Experiment)) +
geom_point()+
xlab("Doubling Time (h)")+
ggtitle("Growth rate vs meanGFP grouped by experiment for Glucose")+
graph_theme
all_conditions_df %>%
filter(str_detect(Experiment, "Gly")) %>%
ggplot(aes(x=doubling_timeH, y=meanGFP, color=Experiment)) +
geom_point()+
xlab("Doubling Time (Hours)")+
ggtitle("Growth rate vs meanGFP grouped by experiment for Glycine")+
graph_theme
all_conditions_df %>%
group_by(group, Experiment) %>%
mutate(osmolarity = mean(osmolarity)) %>%
mutate(meanGR = median(doubling_time))%>%
ggplot(aes(x=osmolarity, y=meanGFP, group=interaction(group, Experiment)))+
geom_boxplot(aes(fill=Experiment, colour =Experiment), position="identity", width=100, alpha=0.7) +
ylab('GFP (A.U.)')+
xlab("Osmolarity (mOsm)")+
theme(axis.text.x = element_text(angle=65, vjust=0.6))+
graph_theme
#ggsave(filename = "GFP vs Osmolarity Exponential Phase all.png", height = 7, width = 14)
all_conditions_df %>%
group_by(group, Experiment) %>%
mutate(osmolarity = mean(osmolarity)) %>%
ggplot(aes(x=osmolarity, y=doubling_time, group=interaction(group, Experiment)))+
geom_boxplot(aes(fill=Experiment, colour =Experiment), position="identity", width=120, alpha=0.7) +
ylab('Growth Rate (1/min)')+
xlab("Osmolarity (mOsm)")+
theme(axis.text.x = element_text(angle=65, vjust=0.6))+
graph_theme
saveRDS(all_conditions_df, "all_conditions.rds")
all_conditions_df %>%
ggplot(aes(x=doubling_time, y=meanGFP, color=osmolarity)) +
geom_point(size=2)+
ylab("GFP (A.U.)")+
xlab("Doubling Time (min)")+
graph_theme +
theme(text = element_text(size = 20))+
scale_fill_gradient2(
limits = c(0,2200),
low = "yellow",
mid = "red",
high = "black",
midpoint = 1000,
na.value = "purple",
guide = "colourbar",
aesthetics = "colour"
)
##plot vs max_yield
all_conditions_df %>% ggplot(aes(x=meanGFP, y=maxYield, color=Experiment))+
geom_point()+
ylab("Max Yield (OD)")+
xlab("meanGFP")+
graph_theme
# ggsave("20201123_Max_Yield vs Mean_GFP.png", height = 7, width = 10)
all_conditions_df %>% ggplot(aes(x=meanGFP, y=maxYield, color=doubling_time))+
geom_point()+
ylab("Max Yield (OD)")+
xlab("GFP (A.U)")+
graph_theme+scale_fill_gradient2(
limits = c(0, 600),
low = "yellow",
mid = "red",
high = "black",
midpoint = 250,
na.value = "purple",
guide = "colourbar",
aesthetics = "colour"
)
# ggsave("20201123_Max_Yield vs Mean_GFP_doubling_time.png", height = 7, width = 10)
filter_conditions <- c(
#"Sucrose_M63GluCAA_30C",
#"Sucrose_M63GluCAA_37C",
"Sucrose_M63Gly_37C",
"Sucrose_M63GlyBetaine_37C"
#"Sucrose_M63GluCAABetaine_37C"
#"NaCl_M63GluCAA_37C",
#"NaCl_M63GluCAABetaine_37C",
#"Sucrose_M63Glu_37C",
#"Sucrose_M63Glu_42C"
)
all_conditions_df %>%
filter(Experiment %in% filter_conditions) %>%
ggplot(aes(x=log(meanAUC), y=maxYield, color=Experiment))+
geom_point()+
ylab("Max Yield (OD)")+
xlab("log(AUC GFP)")+
graph_theme
ggsave("m63_glucose_AUC.png", height = 7, width = 10)
all_conditions_df %>%
filter(Experiment %in% filter_conditions) %>%
ggplot(aes(x=log(meanAUC), y=maxYield, color=doubling_time))+
geom_point()+
ylab("Max Yield (OD)")+
xlab("log(AUC GFP)")+
graph_theme+scale_fill_gradient2(
limits = c(0,600),
low = "yellow",
mid = "red",
high = "black",
midpoint = 300,
na.value = "purple",
guide = "colourbar",
aesthetics = "colour"
)
ggsave("m63_glucose_AUC_growth_rate.png", height = 7, width = 10)
saveRDS(all_conditions_df, "all_conditions_df.rds")
